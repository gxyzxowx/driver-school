<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="../static/script/rem.js"></script>
    <title>答题中</title>
    <style>
        body {
            font-size: .26rem;
            background: rgba(247, 247, 247, 1);
            font-family: Source Han Sans CN;
            color: rgba(51, 51, 51, 1);
        }

        * {
            margin: 0;
            padding: 0;
        }

        ul {
            list-style: none;
        }

        .StatusBar {
            height: .4rem;
            width: 100%;
            background: rgba(255, 255, 255, 1);
        }

        .top {
            height: .88rem;
            width: 100%;
            background: rgba(255, 255, 255, 1);
            text-align: center;
            line-height: .88rem;
            position: relative;
            font-size: .36rem;
            font-weight: 400;
        }

        .top span {
            position: absolute;
            left: .17rem;
            bottom: .3rem;
            font-weight: bolder;
            background: url('../static/img/nav_ico_back.png') no-repeat;
            background-size: cover;
            width: .3rem;
            height: .3rem;
        }

        .questinsnumo {
            font-size: .3rem;
            height: .3rem;
            line-height: .3rem;
            margin-top: .8rem;
            margin-left: .5rem;
        }

        .questions {
            font-size: .32rem;
            height: .32rem;
            line-height: .32rem;
            margin-top: .25rem;
            margin-left: .5rem;
        }

        .subjectList {
            margin-left: 1.25rem;
            margin-top: .38rem;
        }

        .subject {
            padding-left: .23rem;
            width: 1.3rem;
            line-height: 1rem;
            font-size: .32rem;
            font-family: Source Han Sans CN;
            font-weight: 400;
            color: rgba(102, 102, 102, 1);
        }

        .subjectList ul li {
            height: .31rem;
            margin-bottom: .31rem;
            width: 100%;
            font-size: .32rem;
            font-family: Source Han Sans CN;
            font-weight: 400;
            color: rgba(51, 51, 51, 1);
            line-height: .34rem;
            position: relative;
            text-indent: .7rem;
        }

        .subjectList ul li div {
            width: .32rem;
            height: .32rem;
            position: absolute;
            left: .2rem;
            top: .03rem;
        }

        .subjectList ul li div {
            background: url('../static/img/unselect.png')no-repeat;
            background-size: cover;
        }

        .subjectList ul li.active div {
            background: url('../static/img/inicon .png')no-repeat;
            background-size: cover;
        }

        .previous {
            margin-left: .9rem;
        }

        .previous,
        .next {
            width: 2.3rem;
            height: .8rem;
            margin-top: 4.1rem;
            border: none;
            font-size: .32rem;
        }

        .next {
            margin-left: 1.2rem;
        }
    </style>
</head>

<body>
    <div class="StatusBar"></div>
    <div class="top"><span></span>
        <p>答题中</p>
    </div>
    <div id="warp">
        <div class="list" v-for="(item, index) in datalist" :key="item.id">
            <div class="content" v-show="item.ifshow">
                <p class="questinsnumo">第<span>{{index + 1}}</span>题：</p>
                <p class="questions">{{item.title}}</p>
                <div class="subjectList">
                    <ul>
                        <li :class="{active:item.selectArr[0]}" @click="selectOne(index, 0)">
                            <div></div>A.{{item.a}}
                        </li>
                        <li :class="{active:item.selectArr[1]}" @click="selectOne(index, 1)">
                            <div></div>B.{{item.b}}
                        </li>
                        <li :class="{active:item.selectArr[2]}" @click="selectOne(index, 2)">
                            <div></div>C.{{item.c}}
                        </li>
                        <li :class="{active:item.selectArr[3]}" @click="selectOne(index, 3)">
                            <div></div>D.{{item.d}}
                        </li>
                        <li :class="{active:item.selectArr[4]}" @click="selectOne(index, 4)">
                            <div></div>E.{{item.e}}
                        </li>
                    </ul>
                </div>
                <button class="previous" @click="previous(index)">上一题</button><button class="next"
                    @click="next(index)">下一题</button>
            </div>
        </div>
    </div>
    <script src="https://cdn.bootcss.com/vue/2.6.10/vue.min.js"></script>
    <script src="https://cdn.bootcss.com/axios/0.19.0/axios.min.js"></script>
    <script src="../static/js/com.js"></script>
    <script>
        var Vue = new Vue({
            el: '#warp',
            data: {
                keid: '',
                datalist: [
                ]
            },
            mounted: function () {
                this.keid = parseInt(Com.getParams('id'))
                this.getData()
            },
            methods: {
                getData: function () {
                    var _this = this
                    Com.ajax('/index/index/index/startExam', {
                        id: this.keid
                    },
                        function (rs) {
                            // console.log(JSON.stringify(rs))
                            // 给每个题目加是否为选中状态
                            // 添加五个选项的备用数组
                            for (var i = 0; i < rs.length; i++) {
                                rs[i]['selectArr'] = [0, 0, 0, 0, 0]
                                rs[i]['ifshow'] = false
                            }
                            rs[0]['ifshow'] = true
                            _this.datalist = rs
                            // console.log(JSON.stringify(_this.datalist[0]))
                        })
                },
                // 点击变色传值
                selectOne: function (index_ti, index_xuan) {
                    // console.log(this.datalist[index_ti].selectArr[index_xuan])
                    this.datalist[index_ti].selectArr[index_xuan] = 1
                    console.log(this.datalist[0].selectArr)
                },
                // 上一题
                previous: function (index) {
                    if (index === 0) {
                        alert('已经是第一题了')
                        return
                    }
                    this.datalist[index].ifshow = false
                    this.datalist[index - 1].ifshow = true
                },
                // 下一题
                next: function (index) {
                    this.datalist[index].ifshow = false
                    this.datalist[index + 1].ifshow = true
                }
            }
        })
    </script>
</body>

</html>